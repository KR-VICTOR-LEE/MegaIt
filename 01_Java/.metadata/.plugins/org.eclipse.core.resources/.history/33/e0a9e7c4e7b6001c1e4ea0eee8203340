package com.lec.ex3_quiz;

import java.awt.BorderLayout;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.OutputStream;
import java.util.ArrayList;

import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.JTextField;

public class MyFrame extends JFrame implements ActionListener {
	private Container contenPane;
	private JPanel jp;
	private JPanel jp2;
	private JTextField txtName, txtTel, txtage;
	private ImageIcon in, out;
	private JButton btnIn, btnOut;
	private JTextArea jta;
	private JScrollPane scroolbar;
	private int cnt;

	public MyFrame(String title) {
		super(title);
		setDefaultCloseOperation(EXIT_ON_CLOSE);
		contenPane = getContentPane();
		jp = new JPanel(new GridLayout(1, 1));
		jp2 = new JPanel(new GridLayout(1, 1));
		txtName = new JTextField();
		txtTel = new JTextField();
		txtage = new JTextField();
		in = new ImageIcon("icon/join.png");
		out = new ImageIcon("icon.output.png");
		jta = new JTextArea(5, 30);
		scroolbar = new JScrollPane(jta);
		jp.add(new JLabel("이   름 ", (int) CENTER_ALIGNMENT));
		jp.add(txtName);
		jp.add(new JLabel("전   화 ", (int) CENTER_ALIGNMENT));
		jp.add(txtTel);
		jp.add(new JLabel("나   이 ", (int) CENTER_ALIGNMENT));
		jp.add(txtage);

		contenPane.add(jp, BorderLayout.NORTH);
//		contenPane.add(jp2, BorderLayout.NORTH);
//		contenPane.add(btnOut, BorderLayout.CENTER);
//		contenPane.add(btnIn, BorderLayout.CENTER);
		contenPane.add(scroolbar, BorderLayout.SOUTH);

		setVisible(true);
		setSize(new Dimension(400, 300));
		setLocation(200, 100);

		btnIn.addActionListener(this);
		btnOut.addActionListener(this);

	}

	@Override
	public void actionPerformed(ActionEvent e) {
//		if(e.getSource()==btnIn) {
//			OutputStream out = null;
//			ArrayList<Person> persons = new ArrayList<Person>();
//						
//			try {
//				out = new FileOutputStream("src/com/lec/ex3_quiz/person.txt");
//				while(true) {
//															
//					persons.add(new Person(name, tel, age));
//				}
//			} catch (FileNotFoundException e1) {
//				System.out.println(e1.getMessage());
//			}
//			
//		}
		if (e.getSource() == btnOut) {
			String name = txtName.getText().trim();
			String tel = txtTel.getText().trim();
			if (name.equals("") || tel.equals("")) {
				System.out.println("이름과 전화번호는 필수 입력 사항입니다.");
				return;
			}
			if (tel.indexOf("-") == tel.lastIndexOf("-") || tel.indexOf("-") < 2 || tel.lastIndexOf("-") > 10) {
				System.out.println("전화번호 형식을 확인해 주세요.");
				return;
			}
			int age = 0;
			try {
				age = Integer.parseInt(txtage.getText());
				if (age < 0 || age > 150) {
					System.out.println("유효하지 않는 나이를 입력할 경우 0살로");
					age = 0;
				}
			} catch (Exception e2) {
				System.out.println("유효하지 않는 나이를 입력하셨습니다.");
			}
			System.out.println(++cnt + "명 입력됨");
			if (cnt == 1) {
				jta.setText("이름\t전화\t\t나이\n");
			}
			jta.append(name + "\t" + tel + "\t\t" + age + "\n");
			txtName.setText("");
			txtTel.setText("");
			txtage.setText("");

		}
	}

	public static void main(String[] args) {
		new MyFrame("");
	}
}
